<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="{{ settings.color_background }}">
    <link rel="canonical" href="{{ canonical_url }}">

    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
    {%- endif -%}

    <title>
      {{ page_title }}
      {%- if current_tags %} &ndash; {{ current_tags | join: ', ' }}{% endif -%}
      {%- if current_page != 1 %} &ndash; PÃ¡gina {{ current_page }}{% endunless -%}
      {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
    </title>

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}">
    {% endif %}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    {{ content_for_header }}

    <style>
      :root {
        --color-bg: {{ settings.color_background }};
        --color-bg-card: {{ settings.color_card }};
        --color-text: {{ settings.color_foreground }};
        --color-text-muted: {{ settings.color_muted }};
        --color-primary: {{ settings.color_lamp_purple }};
        --color-secondary: {{ settings.color_lamp_blue }};
        --color-tertiary: {{ settings.color_lamp_warm }};
        --color-border: {{ settings.color_foreground | color_modify: 'alpha', 0.1 }};
        --color-btn-bg: {{ settings.color_button_bg }};
        --color-btn-text: {{ settings.color_button_text }};
        --font-display: 'Cormorant Garamond', Georgia, serif;
        --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      }

      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
      
      html {
        font-size: 16px;
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
      }
      
      body {
        font-family: var(--font-body);
        background-color: var(--color-bg);
        color: var(--color-text);
        line-height: 1.6;
        min-height: 100vh;
      }
      
      img { max-width: 100%; height: auto; display: block; }
      a { color: inherit; text-decoration: none; }
      button { font-family: inherit; cursor: pointer; }
      
      .skip-link {
        position: absolute;
        top: -100px;
        left: 0;
        background: var(--color-primary);
        color: white;
        padding: 12px 16px;
        z-index: 9999;
      }
      .skip-link:focus { top: 0; }
      
      .page-width {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      
      /* Buttons */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 14px 28px;
        font-size: 0.9375rem;
        font-weight: 500;
        border-radius: 10px;
        border: none;
        transition: all 0.2s ease;
        cursor: pointer;
        text-decoration: none;
      }
      
      .btn--primary {
        background: var(--color-btn-bg);
        color: var(--color-btn-text);
      }
      .btn--primary:hover {
        opacity: 0.9;
        transform: translateY(-2px);
      }
      
      .btn--secondary {
        background: transparent;
        color: var(--color-text);
        border: 1px solid var(--color-border);
      }
      .btn--secondary:hover {
        background: var(--color-bg-card);
        border-color: var(--color-primary);
      }
      
      .btn--accent {
        background: var(--color-primary);
        color: white;
      }
      .btn--accent:hover {
        opacity: 0.9;
        box-shadow: 0 0 40px {{ settings.color_lamp_purple | color_modify: 'alpha', 0.4 }};
      }
      
      .btn--large {
        padding: 18px 36px;
        font-size: 1rem;
      }
      
      .btn--full { width: 100%; }

      /* Cart Drawer Overlay */
      .cart-drawer-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(4px);
        z-index: 150;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      .cart-drawer-overlay.is-visible {
        opacity: 1;
        visibility: visible;
      }

      /* Placeholder SVG */
      .placeholder-svg {
        fill: var(--color-text-muted);
        background: var(--color-bg-card);
        width: 100%;
        height: 100%;
      }

      /* Animations */
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-in { animation: fadeInUp 0.6s ease forwards; }
    </style>

    {{ 'lumei-base.css' | asset_url | stylesheet_tag }}
    <script>document.documentElement.className = document.documentElement.className.replace('no-js', 'js');</script>
  </head>

  <body class="template-{{ template.name }}">
    <a class="skip-link" href="#MainContent">Saltar al contenido</a>

    {% section 'header' %}

    <main id="MainContent" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% section 'footer' %}

    <div class="cart-drawer-overlay" id="cart-overlay"></div>
    {% section 'cart-drawer' %}

    <script>
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}'
      };
    </script>
    {{ 'lumei-scripts.js' | asset_url | script_tag }}
  </body>
</html>
